import{_ as a,o as i,c as e,ag as s}from"./chunks/framework.rAhUSuuf.js";const k=JSON.parse('{"title":"API 概览","description":"","frontmatter":{},"headers":[],"relativePath":"api/overview.md","filePath":"api/overview.md","lastUpdated":null}'),l={name:"api/overview.md"};function d(o,t,n,r,h,p){return i(),e("div",null,[...t[0]||(t[0]=[s(`<h1 id="api-概览" tabindex="-1">API 概览 <a class="header-anchor" href="#api-概览" aria-label="Permalink to &quot;API 概览&quot;">​</a></h1><h2 id="基础信息" tabindex="-1">基础信息 <a class="header-anchor" href="#基础信息" aria-label="Permalink to &quot;基础信息&quot;">​</a></h2><ul><li><strong>接口地址</strong>：<code>https://your-worker-api.workers.dev</code> 或你的自定义域名</li><li><strong>数据格式</strong>：JSON</li><li><strong>字符编码</strong>：UTF-8</li></ul><p>所有 API 均为 RESTful 风格，无会话 Cookie，认证全部通过 <code>Authorization</code> 请求头完成。</p><h2 id="功能特性" tabindex="-1">功能特性 <a class="header-anchor" href="#功能特性" aria-label="Permalink to &quot;功能特性&quot;">​</a></h2><h3 id="评论点赞" tabindex="-1">评论点赞 <a class="header-anchor" href="#评论点赞" aria-label="Permalink to &quot;评论点赞&quot;">​</a></h3><ul><li>支持对单条评论进行点赞</li><li>每个用户对同一条评论只能点赞一次（通过 localStorage 本地记录用户 ID 和点赞状态）</li><li>点赞数实时更新</li><li>可通过管理员后台功能设置页面开启/关闭评论点赞功能</li></ul><h3 id="文章点赞" tabindex="-1">文章点赞 <a class="header-anchor" href="#文章点赞" aria-label="Permalink to &quot;文章点赞&quot;">​</a></h3><ul><li>支持对整篇文章进行点赞</li><li>每个用户对同一篇文章只能点赞一次</li><li>点赞数实时显示</li><li>可通过管理员后台功能设置页面开启/关闭文章点赞功能</li></ul><h2 id="版本信息" tabindex="-1">版本信息 <a class="header-anchor" href="#版本信息" aria-label="Permalink to &quot;版本信息&quot;">​</a></h2><p>部署成功后，直接访问 Base URL，成功时返回 HTML，其中包含类似文案：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;成功部署 CWD 评论系统 API！文档地址 https://cwd.js.org&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="鉴权方式" tabindex="-1">鉴权方式 <a class="header-anchor" href="#鉴权方式" aria-label="Permalink to &quot;鉴权方式&quot;">​</a></h2><p>公开接口与管理员接口的鉴权要求不同：</p><ul><li>公开接口（Public API） <ul><li><code>/api/comments</code></li><li><code>/api/config/comments</code></li><li>默认无需认证，可直接访问。</li></ul></li><li>管理员接口（Admin API） <ul><li>路径前缀：<code>/admin/*</code></li><li>除 <code>/admin/login</code> 外，其余接口都需要携带管理员 Token。</li></ul></li></ul><p>管理员接口需要使用 Bearer Token 认证：</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;token&gt;</span></span></code></pre></div><p>Token 通过登录接口获取，有效期为 48 小时，服务端会在 KV 中存储会话信息并在每次请求时进行校验。</p><h2 id="http-状态码" tabindex="-1">HTTP 状态码 <a class="header-anchor" href="#http-状态码" aria-label="Permalink to &quot;HTTP 状态码&quot;">​</a></h2><p>常见状态码及含义如下：</p><table tabindex="0"><thead><tr><th>状态码</th><th>说明</th><th>典型场景</th></tr></thead><tbody><tr><td>200</td><td>请求成功</td><td>正常查询、操作成功</td></tr><tr><td>400</td><td>请求参数错误</td><td>缺少必填字段、格式不正确等</td></tr><tr><td>401</td><td>未授权</td><td>未携带 Token 或 Token 失效</td></tr><tr><td>403</td><td>禁止访问</td><td>登录失败次数过多导致 IP 被暂时封禁</td></tr><tr><td>404</td><td>资源不存在（当前未显式使用）</td><td>预留给未来可能的资源不存在场景</td></tr><tr><td>429</td><td>请求过于频繁</td><td>评论频率超过限制（默认同一 IP 10 秒内只能评论一次）</td></tr><tr><td>500</td><td>服务器内部错误</td><td>未捕获异常、数据库错误等</td></tr></tbody></table>`,21)])])}const u=a(l,[["render",d]]);export{k as __pageData,u as default};
